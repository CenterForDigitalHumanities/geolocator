<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html lang="en">

<head>
    <title>Geolocating Web Annotation Generator</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/chota@latest">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
     integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
     crossorigin=""/>
    <link rel="stylesheet" href="stylesheets/style.css" />
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
     integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
     crossorigin=""></script>
    <!--<script src="https://cdn.osmbuildings.org/classic/0.2.2b/OSMBuildings-Leaflet.js"></script>-->
    <script src="js/annotate.js"></script>   
    <script src="components/layout.js"></script>
</head>

<body is="geo-page">
    <div class="container">
        <div id="supplyURI" class="card">
            <header>
                Supply an existing Web Resource URI to assert coordinates upon to begin.
                We encourage that your provide your favorite IIIF object that contains a label and/or description.
            </header>
            <div>
                <label>Object URI</label><input id="objURI" type="text" />
            </div>
            <footer>
                <input id="uriBtn" type="button" class="button primary" value="Use This URI"
                    onclick="provideTargetID(event)" />
            </footer>
        </div>

        <div id="confirmURI" class="card is-hidden notfirst">
            <header>Resolved URI</header>
            <div>
                <input type="button" class="button primary" value="Confirm URI" onclick="confirmTarget(event)" />
                <div id="URIpreview">

                </div>
            </div>
            <footer>

            </footer>
        </div>

        <!-- Get the Lat and Long, allow them to use Leaflet to provide, use Leaflet to preview and confirm -->
        <div id="coordinatesCard" class="card notfirst">
            <header title="Use the map below to pan around.  Click to be given the option to use coordinates, 
                or enter coordinates manually.">
                Use the map to select coordinates. You may also supply coordinates manually.
                <br><input type="button" class="button primary" value="Confirm Coordinates"
                    onclick="previewAnnotation(event)" />
            </header>
            <div class="card-body">
                <div>
                    <label>Latitude</label>
                    <input id="leafLat" step=".000000001" type="number" />
                    <label>Longitude</label>
                    <input id="leafLong" step=".000000001" type="number" />
                </div>
                <div title="Use the map below to pan around.  Click to be given the option to use coordinates, or enter coordinates manually."
                    id="leafletPreview" class="col"></div>
            </div>
            <footer>

            </footer>
        </div>
        <div id="createAnnotation" class="card is-hidden notfirst">
            <header>
                See your new Annotation and decide whether or not to save it.
            </header>
            <div>
                <div id="annoPreview"> </div>
            </div>
            <footer>
                <input id="createAnnoBtn" type="button" class="button primary" value="Create Annotation"
                    app="RERUM Geolocator" onclick="GEOLOCATOR.submitAnno(event, 'geolocating@rerum.io')" />
                <input id="restartBtn" type="button" class="button Primary" value="Start Over" onclick="restart()" />
            </footer>
        </div>
    </div>
</body>
<script>
    window.onload = () => init() 
    
    window.onbeforeunload = function () {
        window.scrollTo(0, 0)
    }

    document.getElementById("objURI").onfocus = function (event) {
        window.scrollTo(0, document.body.scrollHeight)
    }

    document.getElementById("leafLat").onfocus = function (event) {
        window.scrollTo(0, leafLat.offsetTop - 10)
    }

    document.getElementById("leafLong").onfocus = function (event) {
        window.scrollTo(0, leafLong.offsetTop - 10)
    }
</script>
</body>
</html>
